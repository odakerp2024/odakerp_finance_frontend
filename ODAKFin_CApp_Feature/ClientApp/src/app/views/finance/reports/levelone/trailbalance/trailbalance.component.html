<div class="container-fluid">
    <form [formGroup]="filterForm">
        <div class="card mt-0 p-3">
           
        <div class="row">
            <div class="col-10">
                <div class="row pb-1">
                    
            <div class="col-md-2">
                <label class="str mb-2">Date</label>
                <mat-form-field class="tillDate mat_date_picker" appearance="outline">
                    <input matInput (dateChange)="onDateChange($event)" formControlName="Date" autocomplete="off"
                        [matDatepicker]="ToDate" id="ToDate" style="padding:3px;">
                    <mat-datepicker-toggle matSuffix [for]="ToDate" class="center-icon"></mat-datepicker-toggle>
                    <mat-datepicker #ToDate></mat-datepicker>
                </mat-form-field>
            </div>

            <div class="col-md-2">
                <label class="str" for="companyName">Select Division</label><br>
                <ng-select class="searchdropdown custom" [clearable]="false" formControlName="DivisionId"
                    (change)="onDivisionChange(filterForm.value.DivisionId)" (ngModelChange)="getOfficeLists($event)">
                    <ng-option [value]="''" disabled>--SELECT DIVISION--</ng-option>
                    <ng-container *ngFor="let division of divisionList">
                        <ng-option *ngIf="division.Active" [value]="division.ID">
                            <span class="textwrap">{{ division.DivisionName | uppercase }}</span>
                        </ng-option>
                    </ng-container>
                </ng-select>
            </div>

            <div class="col-md-2">
                <label class="str">Select Office</label><br>

                <ng-select class="searchdropdown" [clearable]="false" formControlName="OfficeId"
                    (change)="onOfficeChange(filterForm.value.OfficeId)">
                    <ng-option [value]="''" disabled>--SELECT OFFICE--</ng-option>
                    <ng-container *ngFor="let office of officeList">
                        <ng-option [value]="office.ID">
                            <span class="textwrap">{{office.OfficeName | uppercase}}</span>
                        </ng-option>
                    </ng-container>
                </ng-select>
            </div>

                </div>
            </div>


            <div class="col-2" style="padding-top: 23px;">
                <div class="text-center">
                    <button type="button" (click)="createFilterForm();trailbalanceList();"
                        class="btn btn-warning text-white mb-0 col-auto clear-btn">
                        CLEAR
                    </button>
                </div>
            </div>

            </div>

        </div>
    </form>


    <div class="row">
        <div class="col-md-12 mt-2">
            <div class="card m-b-30">
                <div class="card-body cpad enqview">
       
               <div class="row">
                <div class="col-10 justify-content-end text-center ">
                   <h6 class="title">ODAK SOLUTIONS PRIVATE LIMITED</h6>
                   <h6 class="subtitle">Trail Balance</h6>
                   <p class="subtitle">Basis: Accrual</p>
                   <p class="subtitle">As of {{ selectedDate ? selectedDate : currentDate | date:'mediumDate' }}</p>
       
               </div>
        
                <div class="col-2 text-right ">
                    <div style="font-weight: 600;padding-top: 18px;padding-right: 10px;">
                        <img style="cursor: pointer;" width="36px" height="36px"
                        class="exportAs mx-1 align-baseline"
                        src="../../../../../assets/images/csv_color.png" (click)="downloadExcel()"
                        alt="logo">
                        <img style="cursor: pointer;" width="36px" height="36px"
                        class="exportAs mx-1 align-baseline"
                        src="../../../../../assets/images/xlsx_color.png" (click)="downloadExcel()"
                        alt="logo">
                    </div>
                </div>
       
               </div>
               
               </div>
        
        
                <div class="col-12">
                    <table id="datatable-buttons" #table class="table table-responsive table-bordered w-100 dataTable no-footer"
                        role="grid" aria-describedby="datatable-buttons_info">
                        <thead>
                            <tr role="row">
                                <th class="sorting" tabindex="0" aria-controls="datatable-buttons" rowspan="1"
                                                    colspan="1" aria-label="Date: activate to sort column ascending"
                                                    (click)="sort('Date')" style="width: 177.575px;">Account  </th>
                                <!-- <th class="sorting" tabindex="0" aria-controls="datatable-buttons" rowspan="1"
                                                    colspan="1" aria-label="Name: activate to sort column ascending"
                                                    (click)="sort('Receipt')" style="width: 177.575px;">Account Code</th> -->
                                <th class="sorting" tabindex="0" aria-controls="datatable-buttons" rowspan="1"
                                                    colspan="1" aria-label="Name: activate to sort column ascending"
                                                    (click)="sort('Type')" style="width: 177.575px;">Net Credit</th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-buttons" rowspan="1"
                                                    colspan="1" aria-label="Name: activate to sort column ascending"
                                                    (click)="sort('CustomerName')" style="width: 177.575px;">Net Debit</th>
                            </tr>
            
                        </thead>
            
                        <tbody>
                            <ng-container *ngIf="pagedItems.length > 0; else noRecord">
                              <ng-container *ngFor="let group of pagedItems">
                                <!-- Group header row with blue background -->
                                <tr>
                                  <td colspan="9" style="font-weight: bold;">
                                    {{ group.GroupName | uppercase }}
                                  </td>
                                </tr>
                                <!-- Rows for items within the group -->
                                <tr *ngFor="let balance of group.items; let i = index">
                                  <td (click)="editBalance(balance.ChartOfAccountsId)" style="color: #0366d6; cursor: pointer;">
                                    <ng-container *ngIf="i === 0 || balance.GrandParentAccountName !== group.items[i - 1].GrandParentAccountName">
                                      <strong>{{ balance.GrandParentAccountName }}</strong> -
                                    </ng-container>
                                    <ng-container class="ml-10" *ngIf="i === 0 || balance.ParentAccountName !== group.items[i - 1].ParentAccountName">
                                      <strong>{{ balance.ParentAccountName }}</strong> -
                                    </ng-container>
                                    <span class="child-account">
                                      {{ balance.ChildAccountName }}
                                    </span>
                                  </td>
                                  <td class="hyperTextColor text-right" *ngIf="balance.ChildTransaction_Type === 'Credit'">
                                    {{ balance.ChildNet_Balance | dynamicDecimal }}
                                  </td>
                                  <td class="hyperTextColor text-right" *ngIf="balance.ChildTransaction_Type !== 'Credit'">0</td>
                                  <td class="hyperTextColor text-right" *ngIf="balance.ChildTransaction_Type === 'Debit'">
                                    {{ balance.ChildNet_Balance | dynamicDecimal }}
                                  </td>
                                  <td class="hyperTextColor text-right" *ngIf="balance.ChildTransaction_Type !== 'Debit'">0</td>
                                </tr>
                              </ng-container>
                            </ng-container>
                            <ng-template #noRecord>
                              <tr *ngIf="pagedItems.length === 0">
                                <td class="text-center" colspan="9" style="height: 100px;">No Records Found</td>
                              </tr>
                            </ng-template>
                          </tbody>
                          
                        
                        <tfoot>
                            <tr class="footer-position-sticky" style=" padding: 7px !important;
                            background-image: linear-gradient(#3A5BA0, #273773) !important;
                            color: #fff !important;">
                                <td colspan="1" class="text-left">
                                    <span style="font-size: medium;">Grand Total : </span>
                                </td>
                              
                                <td class="text-right" colspan="1">{{totalcreditamount | dynamicDecimal }}</td>
                                <td class="text-right" colspan="1">{{totaldebitamount | dynamicDecimal }}</td>

                            </tr>
                        </tfoot>
            
                    </table>
            
                </div>
    <!-- <div class="row page mr-3" align="right">
        <ul *ngIf="pager.totalItems > 10 && pager.totalItems > 10"
            class="pagination">
            <li [ngClass]="{disabled:pager.currentPage === 1}">
                <a (click)="setPage(1)">First</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === 1}">
                <a (click)="setPage(pager.currentPage - 1)">Previous</a>
            </li>
            <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                <a (click)="setPage(page)">{{page}}</a>
            </li>
            <li *ngIf="(pager.totalPages - pager.startPage) > 5 ">
                <a (click)="setPage(pager.startPage + 5)">...</a>
            </li>
            <li *ngIf="(pager.totalPages - pager.startPage) > 5">
                <a (click)="setPage(pager.totalPages)">{{pager.totalPages}}</a>
            </li>

            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a (click)="setPage(pager.currentPage + 1)">Next</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a (click)="setPage(pager.totalPages)">Last</a>
            </li>
        </ul>
    </div> -->

                </div>
            </div>
        </div>
</div>

